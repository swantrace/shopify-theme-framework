<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file includes all the helper functions required by other files
 */
import slugify from 'slugify';

/**
 * escapes a string, similar with shopify's escape filter
 * @param {string} str The string to be handled
 * @returns escaped string
 */
export const escapeStr = (str) =>
  str.replace(
    /[\u00A0-\u017e\u0180-\u9999]/gim,
    (i) => `&amp;#${i.charCodeAt(0)};`
  );

/**
 * handleizes a string, similar with shopify's handle filter
 * @param {string} str The string to be handled
 * @returns handleized string
 */
export const handleize = (str) =>
  slugify(str.replace(/[^0-9a-zA-Z_]/g, ' '), {
    replacement: '-',
    lower: true,
  });

/**
 * creates an array of consecutive integers from start to end
 * @param {number} start from which the array starts
 * @param {number} end with which the array ends
 */
export const range = (start, end) => {
  return new Array(end - start + 1).fill(undefined).map((_, i) => i + start);
};

/**
 * @todo the function doesn't work when current_tags is 'all'
 * @todo the function should be moved to another place
 */
export const adjustCollectionPageURL = (url, params, currentTags, handle) => {
  let newUrl = '';
  if (handle === 'types' || handle === 'vendors') {
    newUrl = `${url.split('?')[0]}?q=${params.q}`;
    if (params.constraint) {
      newUrl += `&amp;constraint=${params.constraint}`;
    }
  } else {
    newUrl = `/collections/${handle}/${currentTags}?`;
  }
  if (params.page) {
    newUrl += `&amp;page=${params.page}`;
  }
  if (params.sort_by) {
    newUrl += `&amp;page=${params.sort_by}`;
  }
  window.history.pushState(null, '', newUrl);
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#adjustCollectionPageURL">adjustCollectionPageURL</a></li><li><a href="global.html#commit">commit</a></li><li><a href="global.html#dispatch">dispatch</a></li><li><a href="global.html#escapeStr">escapeStr</a></li><li><a href="global.html#handleize">handleize</a></li><li><a href="global.html#range">range</a></li><li><a href="global.html#runCallbacks">runCallbacks</a></li><li><a href="global.html#subscribe">subscribe</a></li><li><a href="global.html#unsubscribe">unsubscribe</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Sun Jun 07 2020 16:33:08 GMT-0700 (北美太平洋夏令时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
